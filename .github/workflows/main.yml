name: CI
on: push

jobs:
  terraform:
    runs-on: self-hosted
    env:
         DEV_ENV: ${{ secrets.DEVENV }}
         UAT_ENV: ${{ secrets.UATENV }}
    steps:
      - uses: actions/checkout@v2
        #      - run: terraform init
      - run: terraform init \
            - backend-config="bucket=bucket-for-statefile-48693"
            #  -backend-config="prefix=demo" 
            # -backend-config="credentials=service-account.json"
      - run: terraform plan -var-file="$DEV_ENV"
        #    - run: terraform apply -auto-approve -var-file="uat.tfvars"
